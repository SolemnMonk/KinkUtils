package monk.solemn.kutils.plugin.lexi_belle_raw;

import java.sql.SQLException;
import java.util.UUID;

import hall.caleb.selenium.enums.SelectorType;
import hall.caleb.selenium.objects.command.Command;
import hall.caleb.selenium.objects.command.CommandFactory;
import hall.caleb.selenium.objects.response.MultiResultResponse;
import monk.solemn.kutils.objects.QueuedTask;
import monk.solemn.kutils.objects.Shoot;
import monk.solemn.kutils.utilities.high.SeleniumServerUtilities;
import monk.solemn.kutils.utilities.high.ShootUtilities;

public class Downloader {
	public static Shoot downloadVideo(UUID seleniumId, QueuedTask task, String url) {
		SeleniumServerUtilities.sendSeleniumCommand(CommandFactory.newGoToCommand(seleniumId, url));
		
		Command command = CommandFactory.newReadTextCommand(seleniumId, SelectorType.Xpath, LexiBelleRawPlugin.getXpath("ShootTitle"), 1);
		String title = ((MultiResultResponse) SeleniumServerUtilities.sendSeleniumCommand(command)).getResults().get(0);
		
		Shoot shoot;
		try {
			shoot = ShootUtilities.getShootByTitle(title);
		} catch (SQLException e) {
			e.printStackTrace();
			return null;
		}
		
		
		
		return shoot;
	}
}
